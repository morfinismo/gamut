"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var validateTextBox=function(e){return"TextField"===e.__gwt_instance.mb},validateCheckBox=function(e){return"CheckBoxComponent"===e.__gwt_instance.mb},validatPageWidget=function(e){return"Panel"===e.__gwt_instance.mb&&null===e.parent},newElem=function(e){return document.createElement(e)},timeSetter=function(e,t){if(e){var p={options:{leadingZeros:!0,initialValue:"00:00:00",zIndex:9,maxTime:"99:59:59",valueChange:function(e){return e}},input:e,isAppMaker:!1};if(void 0!==e.__gwt_instance&&null!==e.__gwt_instance&&validateTextBox(e)&&(p.input=e.getElement().children[1],p.isAppMaker=!0),p.input.setAttribute("type","text"),p.isAppMaker&&e.getElement().children[0].classList.add("gamut--label-fix"),null!=t&&"object"===_typeof(t)){if(void 0!==t.leadingZeros&&null!==t.leadingZeros&&"boolean"==typeof t.leadingZeros&&(p.options.leadingZeros=t.leadingZeros),void 0!==t.initialValue&&null!==t.initialValue&&new RegExp(/\d{1,2}:\d{1,2}:\d{1,2}/).test(t.initialValue)&&(p.options.initialValue=t.initialValue),void 0!==t.zIndex&&null!==t.zIndex){var n=parseInt(t.zIndex);"number"==typeof n&&(p.options.zIndex=n)}void 0!==t.valueChange&&null!==t.valueChange&&"function"==typeof t.valueChange&&(p.options.valueChange=t.valueChange)}p.hourValue=parseInt(p.options.initialValue.split(":")[0]),p.minuteValue=parseInt(p.options.initialValue.split(":")[1]),p.secondValue=parseInt(p.options.initialValue.split(":")[2]),p.setValue=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=p.hourValue,n=p.minuteValue,a=p.secondValue;p.options.leadingZeros&&(t=p.hourValue<10?"0"+p.hourValue:p.hourValue,n=p.minuteValue<10?"0"+p.minuteValue:p.minuteValue,a=p.secondValue<10?"0"+p.secondValue:p.secondValue);var i="".concat(t,":").concat(n,":").concat(a);p.input.value=i,e&&p.options.valueChange(i)},p.setValue(),p.controllerClick=function(e){var t,n=e.target,a=n.getAttribute("data-action"),i=n.parentElement.children[0],r=i.getAttribute("data-timearg"),o=parseInt(i.value);"add"===a?"hrs"===r?t=o+1:"mins"!==r&&"secs"!==r||(t=59===o?0:o+1):"substract"===a&&("hrs"===r?t=o-1:"mins"!==r&&"secs"!==r||(t=0===o?59:o-1)),t=t<1?0:t,"hrs"===r?p.hourValue=t:"mins"===r?p.minuteValue=t:"secs"===r&&(p.secondValue=t),i.value=t<10&&p.options.leadingZeros?"0"+t:t,p.setValue(!0)},p.paramChange=function(e){var t,n=e.target,a=n.getAttribute("data-timearg"),i=parseInt(n.value);"hrs"===a?(t=i<1?0:i,p.hourValue=t):"mins"===a?(t=59<i?0:i<0?59:i,p.minuteValue=t):"secs"===a&&(t=59<i?0:i<0?59:i,p.secondValue=t),p.options.leadingZeros&&t<10&&(t="0"+t),n.value=t,p.setValue(!0)};var r=newElem("div");return p.open=function(e,t,n,s){r.innerHTML="",r.style.width=s+"px",r.style.top=e+n+2+"px",r.style.left=t+"px",r.style.zIndex=p.options.zIndex,r.classList.add("gamut__timeSetter");var d=newElem("div");d.classList.add("gamut__timeSetter__body"),d.style.flexDirection=s<175?"column":"row";["Hrs","Mins","Secs"].forEach(function(e){var t=newElem("div");t.classList.add("gamut__timeSetter__paramBox"),t.style.width=s<175?"100%":"33.3%";var n=newElem("span");n.classList.add("gamut__timeSetter__paramLabel"),n.style.textAlign=s<175||224<s?"center":"left";var a=document.createTextNode(e);n.appendChild(a),t.appendChild(n);var i=newElem("div");i.classList.add("gamut__timeSetter__paramInputWrapper");var r=newElem("input");switch(r.classList.add("gamut__timeSetter__paramInputWrapper__input"),r.style.textAlign=s<175||224<s?"center":"left",r.style.paddingRight=s<175||224<s?"15px":"0px",r.addEventListener("change",p.paramChange),r.addEventListener("focus",function(e){r.select()}),r.setAttribute("type","text"),e){case"Hrs":r.setAttribute("value",p.options.leadingZeros&&p.hourValue<10?"0".concat(p.hourValue):p.hourValue),r.setAttribute("data-timearg","hrs");break;case"Mins":r.setAttribute("value",p.options.leadingZeros&&p.minuteValue<10?"0".concat(p.minuteValue):p.minuteValue),r.setAttribute("data-timearg","mins");break;default:r.setAttribute("value",p.options.leadingZeros&&p.secondValue<10?"0".concat(p.secondValue):p.secondValue),r.setAttribute("data-timearg","secs")}i.appendChild(r);var o=newElem("span");o.classList.add("gamut__timeSetter__paramInputWrapper__controller--plus"),o.setAttribute("data-action","add");var l=document.createTextNode("❮");o.style.top=p.isAppMaker?"0px":"-2px",o.addEventListener("click",p.controllerClick),o.appendChild(l),i.appendChild(o);var c=newElem("span");c.classList.add("gamut__timeSetter__paramInputWrapper__controller--minus"),c.setAttribute("data-action","substract");var u=document.createTextNode("❯");c.style.bottom=p.isAppMaker?"0px":"-2px",c.appendChild(u),c.addEventListener("click",p.controllerClick),i.appendChild(c),t.appendChild(i),d.appendChild(t)}),r.appendChild(d);var a=newElem("div");a.classList.add("gamut__timeSetter__doneButton");var i=document.createTextNode("DONE");a.appendChild(i),a.addEventListener("click",p.close),r.appendChild(a),p.input.parentNode.appendChild(r),window.addEventListener("click",p.close)},p.close=function(e){(p.isAppMaker?e.target!==p.input.parentElement:e.target!==p.input)&&(p.input.parentNode.removeChild(r),window.removeEventListener("click",p.close),gamut.activeTimeSetter=null)},p.preventClose=function(e){return e.stopPropagation(),!1},r.addEventListener("click",p.preventClose),p.isAppMaker&&p.input.parentElement.addEventListener("click",p.preventClose),p.focus=function(e){!gamut.activeTimeSetter||gamut.activeTimeSetter.close(e);var t=p.isAppMaker?e.target.parentElement.getBoundingClientRect():p.input.getBoundingClientRect();p.open(t.top,t.left,t.height,t.width),(gamut.activeTimeSetter=p).input.blur()},p.input.addEventListener("focus",p.focus),p.input.blur(),p}console.error("%cGAMUT Time Setter Error: %cEither an input element or a Text Box Widget is required!","color:red","color:brown")},formatTextBox=function(e,t){if(validateTextBox(e)){var n={type:"text",readonly:!1,min:0,max:999999999,step:1,initialValue:null};null!=t&&"object"===_typeof(t)&&(t.type&&["number","password","text"].includes(t.type)&&(n.type=t.type),void 0!==t.readonly&&null!==t.readonly&&"boolean"==typeof t.readonly&&(n.readonly=t.readonly),void 0!==t.max&&null!==t.max&&"number"==typeof t.max&&(n.max=t.max),void 0!==t.min&&null!==t.min&&"number"==typeof t.min&&(n.min=t.min),void 0!==t.step&&null!==t.step&&"number"==typeof t.step&&(n.step=t.step),void 0!==t.initialValue&&null!==t.initialValue&&(n.initialValue=t.initialValue));var a=e.getElement().children[1];a.setAttribute("type",n.type),n.readonly&&a.setAttribute("readonly",""),e.getElement().children[0].classList.add("gamut--label-fix"),"number"===n.type&&(a.classList.add("gamut--numberInput"),a.setAttribute("max",n.max),a.setAttribute("min",n.min),a.setAttribute("step",n.step),a.value="number"==typeof n.initialValue?n.initialValue:n.min)}},formatSwitch=function(e,t,n,a){function i(e,i,t){var r=!(2<arguments.length&&void 0!==t)||t;_toConsumableArray(e.querySelectorAll("span")).filter(function(e){return-1<e.classList.toString().indexOf("app-Checkbox--Switch")}).forEach(function(e){var t=_toConsumableArray(e.classList);if(!t.includes(i))if(r)-1===t.toString().indexOf("gamutSwitch--")&&-1===t.toString().indexOf("gmt-")&&(e.classList.add(i),e.classList.add("gamutGlobal"));else if(t.includes("gamutGlobal")||-1===t.toString().indexOf("gamutSwitch--")){for(var n="none",a=0;a<t.length;a++)if(-1<t[a].indexOf("gamutSwitch--")){n=t[a];break}-1===t.toString().indexOf("gmt-")&&(e.classList.remove(n),e.classList.remove("gamutGlobal"),e.classList.add(i),e.classList.add("gamutSwitch"))}})}var r=2<arguments.length&&void 0!==n&&n,o=3<arguments.length?a:void 0,l={checked:t?t.checked:null,checkedBtn:t?t.checkedBtn:null,unchecked:t?t.unchecked:null,uncheckedBtn:t?t.uncheckedBtn:null};if(r)if("string"==typeof t){var c=t;o.forEach(function(e){var t=e.root.getElement(),n=new MutationObserver(function(){i(t,c)});n.observe(t,{subtree:!0,childList:!0}),i(t,c);var a="".concat(e.name,"-switch-observer");window.gamut.observers[a]=n})}else l.unchecked&&document.documentElement.style.setProperty("--unchecked",l.unchecked),l.uncheckedBtn&&document.documentElement.style.setProperty("--uncheckedButton",l.uncheckedBtn),l.checked&&document.documentElement.style.setProperty("--checked",l.checked),l.checkedBtn&&document.documentElement.style.setProperty("--checkedButton",l.checkedBtn);else if(validatPageWidget(e)){var u="".concat(e.name,"-switch-observer"),s=window.gamut.observers[u];if(s&&s.disconnect(),"string"==typeof t){var d=t,p=e.root.getElement(),m=new MutationObserver(function(){i(p,d,!1)});m.observe(p,{subtree:!0,childList:!0}),i(p,d,!1),window.gamut.observers[u]=m}else l.unchecked&&document.documentElement.style.setProperty("--unchecked",l.unchecked),l.uncheckedBtn&&document.documentElement.style.setProperty("--uncheckedButton",l.uncheckedBtn),l.checked&&document.documentElement.style.setProperty("--checked",l.checked),l.checkedBtn&&document.documentElement.style.setProperty("--checkedButton",l.checkedBtn)}else{if(validateCheckBox(e)){var h=e.getElement(),g=_toConsumableArray(h.classList);if(g.forEach(function(e){e.includes("gamutSwitch")&&h.classList.remove(e)}),!(-1<g.toString().indexOf("gmt-"))){var f="gmt-".concat(Math.random().toString().slice(2));h.classList.add(f);var v=l.unchecked||rgba(0,0,0,.5),b=l.uncheckedBtn||rgb(255,255,255),y=l.checked||rgb(66,133,244),_=l.checkedBtn||rgb(66,133,244),k=newElem("style"),x="\n                    .".concat(f," > .app-Checkbox-Input {\n                        background-color: ").concat(v,";\n                    }\n                    \n                    .").concat(f," > .app-Checkbox-Label:after {\n                        background-color: ").concat(b,";\n                    }\n                    \n                    .").concat(f," > .app-Checkbox-Input:checked {\n                        background-color: ").concat(y,";\n                    }\n                    \n                    .").concat(f," > .app-Checkbox-Input:checked + .app-Checkbox-Label:after {\n                        background-color: ").concat(_,";\n                    }                  \n                    ");k.innerHTML=x,document.body.appendChild(k)}}}};!function(){var e={init:function(e,t){if(this.observers={},this.activeTimeSetter=null,this.timeSetter=timeSetter,e&&e.appKey){this.formatTextBox=formatTextBox,this.formatSwitch=formatSwitch;var n=e.pages._values,a=e.popups._values,i=e.pageFragments._values,r=[].concat(_toConsumableArray(n),_toConsumableArray(a),_toConsumableArray(i)),o=[];if(r.forEach(function(e){var t=e.root.getElement();o=[].concat(_toConsumableArray(o),_toConsumableArray(t.querySelectorAll("span"))).filter(function(e){return-1<e.classList.toString().indexOf("gamutSwitch--")})}),o.forEach(function(e){e.classList.add("gamutSwitch")}),null!=t&&"object"===_typeof(t)&&void 0!==t.defaultSwitch&&null!==t.defaultSwitch){t.defaultSwitch;formatSwitch(null,t.defaultSwitch,!0,r)}}else console.warn('%cGAMUT Init Warning: %c"app" parameter is required for Google App Maker. Some features may not work!',"color: red","color:brown")}};window.gamut=e}();