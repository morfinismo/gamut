"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var validateTextBox=function(e){return"TextField"===e.__gwt_instance.mb},validateCheckBox=function(e){return"CheckBoxComponent"===e.__gwt_instance.mb},validatPageWidget=function(e){return"Panel"===e.__gwt_instance.mb&&null===e.parent},validateDateBox=function(e){return"DateTextBox"===e.__gwt_instance.mb},newElem=function(e){return document.createElement(e)},timeSetter=function(e,t){if(e){var m={options:{leadingZeros:!0,initialValue:"00:00:00",zIndex:9,maxTime:"99:59:59",valueChange:function(e){return e}},input:e,isAppMaker:!1};if(void 0!==e.__gwt_instance&&null!==e.__gwt_instance&&validateTextBox(e)&&(m.input=e.getElement().children[1],m.isAppMaker=!0),m.input.setAttribute("type","text"),m.isAppMaker&&e.getElement().children[0].classList.add("gamut--label-fix"),null!=t&&"object"===_typeof(t)){if(void 0!==t.leadingZeros&&null!==t.leadingZeros&&"boolean"==typeof t.leadingZeros&&(m.options.leadingZeros=t.leadingZeros),void 0!==t.initialValue&&null!==t.initialValue&&new RegExp(/\d{1,2}:\d{1,2}:\d{1,2}/).test(t.initialValue)&&(m.options.initialValue=t.initialValue),void 0!==t.zIndex&&null!==t.zIndex){var n=parseInt(t.zIndex);"number"==typeof n&&(m.options.zIndex=n)}void 0!==t.valueChange&&null!==t.valueChange&&"function"==typeof t.valueChange&&(m.options.valueChange=t.valueChange)}m.hourValue=parseInt(m.options.initialValue.split(":")[0]),m.minuteValue=parseInt(m.options.initialValue.split(":")[1]),m.secondValue=parseInt(m.options.initialValue.split(":")[2]),m.setValue=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=m.hourValue,n=m.minuteValue,a=m.secondValue;m.options.leadingZeros&&(t=m.hourValue<10?"0"+m.hourValue:m.hourValue,n=m.minuteValue<10?"0"+m.minuteValue:m.minuteValue,a=m.secondValue<10?"0"+m.secondValue:m.secondValue);var i="".concat(t,":").concat(n,":").concat(a);m.input.value=i,e&&m.options.valueChange(i)},m.setValue(),m.controllerClick=function(e){var t,n=e.target,a=n.getAttribute("data-action"),i=n.parentElement.children[0],r=i.getAttribute("data-timearg"),o=parseInt(i.value);"add"===a?"hrs"===r?t=o+1:"mins"!==r&&"secs"!==r||(t=59===o?0:o+1):"substract"===a&&("hrs"===r?t=o-1:"mins"!==r&&"secs"!==r||(t=0===o?59:o-1)),t=t<1?0:t,"hrs"===r?m.hourValue=t:"mins"===r?m.minuteValue=t:"secs"===r&&(m.secondValue=t),i.value=t<10&&m.options.leadingZeros?"0"+t:t,m.setValue(!0)},m.paramChange=function(e){var t,n=e.target,a=n.getAttribute("data-timearg"),i=parseInt(n.value);"hrs"===a?(t=i<1?0:i,m.hourValue=t):"mins"===a?(t=59<i?0:i<0?59:i,m.minuteValue=t):"secs"===a&&(t=59<i?0:i<0?59:i,m.secondValue=t),m.options.leadingZeros&&t<10&&(t="0"+t),n.value=t,m.setValue(!0)};var r=newElem("div");return m.open=function(e,t,n,s){r.innerHTML="",r.style.width=s+"px",r.style.top=e+n+2+"px",r.style.left=t+"px",r.style.zIndex=m.options.zIndex,r.classList.add("gamut__timeSetter");var d=newElem("div");d.classList.add("gamut__timeSetter__body"),d.style.flexDirection=s<175?"column":"row";["Hrs","Mins","Secs"].forEach(function(e){var t=newElem("div");t.classList.add("gamut__timeSetter__paramBox"),t.style.width=s<175?"100%":"33.3%";var n=newElem("span");n.classList.add("gamut__timeSetter__paramLabel"),n.style.textAlign=s<175||224<s?"center":"left";var a=document.createTextNode(e);n.appendChild(a),t.appendChild(n);var i=newElem("div");i.classList.add("gamut__timeSetter__paramInputWrapper");var r=newElem("input");switch(r.classList.add("gamut__timeSetter__paramInputWrapper__input"),r.style.textAlign=s<175||224<s?"center":"left",r.style.paddingRight=s<175||224<s?"15px":"0px",r.addEventListener("change",m.paramChange),r.addEventListener("focus",function(e){r.select()}),r.setAttribute("type","text"),e){case"Hrs":r.setAttribute("value",m.options.leadingZeros&&m.hourValue<10?"0".concat(m.hourValue):m.hourValue),r.setAttribute("data-timearg","hrs");break;case"Mins":r.setAttribute("value",m.options.leadingZeros&&m.minuteValue<10?"0".concat(m.minuteValue):m.minuteValue),r.setAttribute("data-timearg","mins");break;default:r.setAttribute("value",m.options.leadingZeros&&m.secondValue<10?"0".concat(m.secondValue):m.secondValue),r.setAttribute("data-timearg","secs")}i.appendChild(r);var o=newElem("span");o.classList.add("gamut__timeSetter__paramInputWrapper__controller--plus"),o.setAttribute("data-action","add");var l=document.createTextNode("❮");o.style.top=m.isAppMaker?"0px":"-2px",o.addEventListener("click",m.controllerClick),o.appendChild(l),i.appendChild(o);var u=newElem("span");u.classList.add("gamut__timeSetter__paramInputWrapper__controller--minus"),u.setAttribute("data-action","substract");var c=document.createTextNode("❯");u.style.bottom=m.isAppMaker?"0px":"-2px",u.appendChild(c),u.addEventListener("click",m.controllerClick),i.appendChild(u),t.appendChild(i),d.appendChild(t)}),r.appendChild(d);var a=newElem("div");a.classList.add("gamut__timeSetter__doneButton");var i=document.createTextNode("DONE");a.appendChild(i),a.addEventListener("click",m.close),r.appendChild(a),m.input.parentNode.appendChild(r),window.addEventListener("click",m.close)},m.close=function(e){(m.isAppMaker?e.target!==m.input.parentElement:e.target!==m.input)&&(m.input.parentNode.removeChild(r),window.removeEventListener("click",m.close),gamut.activeTimeSetter=null)},m.preventClose=function(e){return e.stopPropagation(),!1},r.addEventListener("click",m.preventClose),m.isAppMaker&&m.input.parentElement.addEventListener("click",m.preventClose),m.focus=function(e){!gamut.activeTimeSetter||gamut.activeTimeSetter.close(e);var t=m.isAppMaker?e.target.parentElement.getBoundingClientRect():m.input.getBoundingClientRect();m.open(t.top,t.left,t.height,t.width),(gamut.activeTimeSetter=m).input.blur()},m.input.addEventListener("focus",m.focus),m.input.blur(),m}console.error("%cGAMUT Time Setter Error: %cEither an input element or a Text Box Widget is required!","color:red","color:brown")},formatTextBox=function(e,t){if(validateTextBox(e)){var n={type:"text",readonly:!1,min:0,max:999999999,step:1,initialValue:null};null!=t&&"object"===_typeof(t)&&(t.type&&["number","password","text"].includes(t.type)&&(n.type=t.type),void 0!==t.readonly&&null!==t.readonly&&"boolean"==typeof t.readonly&&(n.readonly=t.readonly),void 0!==t.max&&null!==t.max&&"number"==typeof t.max&&(n.max=t.max),void 0!==t.min&&null!==t.min&&"number"==typeof t.min&&(n.min=t.min),void 0!==t.step&&null!==t.step&&"number"==typeof t.step&&(n.step=t.step),void 0!==t.initialValue&&null!==t.initialValue&&(n.initialValue=t.initialValue));var a=e.getElement().children[1];a.setAttribute("type",n.type),n.readonly&&a.setAttribute("readonly",""),e.getElement().children[0].classList.add("gamut--label-fix"),"number"===n.type&&(a.classList.add("gamut--numberInput"),a.setAttribute("max",n.max),a.setAttribute("min",n.min),a.setAttribute("step",n.step),a.value="number"==typeof n.initialValue?n.initialValue:n.min)}},formatSwitch=function(e,t,n,a){function i(e,i,t){var r=!(2<arguments.length&&void 0!==t)||t;_toConsumableArray(e.querySelectorAll("span")).filter(function(e){return-1<e.classList.toString().indexOf("app-Checkbox--Switch")}).forEach(function(e){var t=_toConsumableArray(e.classList);if(!t.includes(i))if(r)-1===t.toString().indexOf("gamutSwitch--")&&-1===t.toString().indexOf("gmt-")&&(e.classList.add(i),e.classList.add("gamutGlobal"));else if(t.includes("gamutGlobal")||-1===t.toString().indexOf("gamutSwitch--")){for(var n="none",a=0;a<t.length;a++)if(-1<t[a].indexOf("gamutSwitch--")){n=t[a];break}-1===t.toString().indexOf("gmt-")&&(e.classList.remove(n),e.classList.remove("gamutGlobal"),e.classList.add(i),e.classList.add("gamutSwitch"))}})}var r=2<arguments.length&&void 0!==n&&n,o=3<arguments.length?a:void 0,l={checked:t?t.checked:null,checkedBtn:t?t.checkedBtn:null,unchecked:t?t.unchecked:null,uncheckedBtn:t?t.uncheckedBtn:null};if(r)if("string"==typeof t){var u=t;o.forEach(function(e){var t=e.root.getElement(),n=new MutationObserver(function(){i(t,u)});n.observe(t,{subtree:!0,childList:!0}),i(t,u);var a="".concat(e.name,"-switch-observer");window.gamut.observers[a]=n})}else l.unchecked&&document.documentElement.style.setProperty("--unchecked",l.unchecked),l.uncheckedBtn&&document.documentElement.style.setProperty("--uncheckedButton",l.uncheckedBtn),l.checked&&document.documentElement.style.setProperty("--checked",l.checked),l.checkedBtn&&document.documentElement.style.setProperty("--checkedButton",l.checkedBtn);else if(validatPageWidget(e)){var c="".concat(e.name,"-switch-observer"),s=window.gamut.observers[c];if(s&&s.disconnect(),"string"==typeof t){var d=t,m=e.root.getElement(),p=new MutationObserver(function(){i(m,d,!1)});p.observe(m,{subtree:!0,childList:!0}),i(m,d,!1),window.gamut.observers[c]=p}else l.unchecked&&document.documentElement.style.setProperty("--unchecked",l.unchecked),l.uncheckedBtn&&document.documentElement.style.setProperty("--uncheckedButton",l.uncheckedBtn),l.checked&&document.documentElement.style.setProperty("--checked",l.checked),l.checkedBtn&&document.documentElement.style.setProperty("--checkedButton",l.checkedBtn)}else{if(validateCheckBox(e)){var v=e.getElement(),h=_toConsumableArray(v.classList);if(h.forEach(function(e){e.includes("gamutSwitch")&&v.classList.remove(e)}),!(-1<h.toString().indexOf("gmt-"))){var g="gmt-".concat(Math.random().toString().slice(2));v.classList.add(g);var f=l.unchecked||rgba(0,0,0,.5),_=l.uncheckedBtn||rgb(255,255,255),b=l.checked||rgb(66,133,244),k=l.checkedBtn||rgb(66,133,244),y=newElem("style"),E="\n                    .".concat(g," > .app-Checkbox-Input {\n                        background-color: ").concat(f,";\n                    }\n                    \n                    .").concat(g," > .app-Checkbox-Label:after {\n                        background-color: ").concat(_,";\n                    }\n                    \n                    .").concat(g," > .app-Checkbox-Input:checked {\n                        background-color: ").concat(b,";\n                    }\n                    \n                    .").concat(g," > .app-Checkbox-Input:checked + .app-Checkbox-Label:after {\n                        background-color: ").concat(k,";\n                    }                  \n                    ");y.innerHTML=E,document.body.appendChild(y)}}}},timePicker=function(r,e){if(r){var P={options:{initialValue:"8:00",zIndex:9,onClose:function(e){return e}},input:r,isAppMaker:!1};if(void 0!==r.__gwt_instance&&null!==r.__gwt_instance&&validateDateBox(r)&&(P.input=r.getElement().children[1],P.isAppMaker=!0,P.dateTime=r.value||new Date),P.input.setAttribute("type","text"),P.isAppMaker){r.getElement().children[0].classList.add("gamut--label-fix"),r.getElement().children[2].style.right="20px";var t=new MutationObserver(function(e,t){for(var n=0;n<e.length;n++){if(0<_toConsumableArray(e[n].removedNodes).filter(function(e){return e.classList.contains("app-DateBox-Popup")}).length){var a=r.value.getTime();P.dateTime.getTime()!==a&&(r.value=new Date(r.value.setHours(P.dateTime.getHours(),P.dateTime.getMinutes(),0,0)),setTimeout(function(){P.timeButton.click()},50));break}}t.disconnect()});P.dateBoxObserver=t,r.getElement().children[2].addEventListener("click",function(){var e=document.querySelector("#app");P.dateBoxObserver.observe(e,{subtree:!1,childList:!0})});var n=newElem("button");n.setAttribute("type","button"),n.setAttribute("aria-label","Open Clock"),n.classList.add("gamut__timePickerBtn"),r.getElement().appendChild(n),P.timeButton=n}if(null!=e&&"object"===_typeof(e)){if(void 0!==e.initialValue&&null!==e.initialValue&&new RegExp(/\d{1,2}:\d{1,2}/).test(e.initialValue)&&(P.options.initialValue=e.initialValue),void 0!==e.zIndex&&null!==e.zIndex){var a=parseInt(e.zIndex);"number"==typeof a&&(P.options.zIndex=a)}void 0!==e.onClose&&null!==e.onClose&&"function"==typeof e.onClose&&(P.options.onClose=e.onClose)}var i=parseInt(P.options.initialValue.split(":")[0]);P.hourValue=23<i||0===i?12:12<i?i-12:i,P.minuteValue=parseInt(P.options.initialValue.split(":")[1]),P.meridiamValue=23<i?"AM":11<i?"PM":"AM",P.setValue=function(){var e,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=P.hourValue,a=P.minuteValue,i=P.meridiamValue;P.isAppMaker?("PM"===i&&n<12&&(n+=12),e=new Date(P.dateTime.setHours(n,a,0,0)),P.dateTime=e,r.value=e):(n=P.hourValue<10?"0"+P.hourValue:P.hourValue,a=P.minuteValue<10?"0"+P.minuteValue:P.minuteValue,e="".concat(n,":").concat(a," ").concat(i),P.input.value=e),t&&P.options.onClose(e)},P.setValue();var M=newElem("div");return P.open=function(e,t,n,a){function i(e){var a=e.target;function n(e){var t=Math.atan2(e.pageX-(u.x+c),e.pageY-(u.y+c));if(i=Math.round(t*(180/Math.PI)*-1+180),i=Math.ceil(i/l)*l,r){a.style.transform="rotate(".concat(i,"deg)");var n=i/l;"minute"===o?n=60==n?0:n:"hour"===o&&(n=0==n?12:n),P["".concat(a.dataset.clockHand,"Value")]=Number(n),n=n<10?"0"+n:n,document.querySelector('input[data-time-param="'.concat(a.dataset.clockHand,'"]')).value=n}}a.style.cursor="grabbing",document.body.style.cursor="grabbing";var i,r=!0,o=a.dataset.clockHand,l="minute"===o?6:30,u=document.querySelector(".gamut__timePicker__clock").getBoundingClientRect(),c=u.width/2;document.addEventListener("mousemove",n),document.addEventListener("mouseup",function e(t){a.style.cursor="grab",document.body.style.cursor="default",r=!r,document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e)})}function r(e){return"hour"===e?P.hourValue<10?"0"+P.hourValue:P.hourValue:"minute"===e?P.minuteValue<10?"0"+P.minuteValue:P.minuteValue:void 0}function o(e){var t=e.target.dataset.meridiamValue;document.querySelectorAll(".gamut__timePicker__meridiamSelector--meridiam").forEach(function(e){e.classList.toggle("gamut__timePicker__meridiamSelector--selected")}),P.meridiamValue=t}M.innerHTML="",P.isAppMaker?(M.style.position="absolute",M.style.top=n+"px",M.style.left="0px"):(M.style.top=e+n+2+"px",M.style.left=t+"px"),M.style.zIndex=P.options.zIndex,M.classList.add("gamut__timePicker");var l=newElem("div");l.classList.add("gamut__timePicker__meridiamSelector");var u=newElem("div");u.setAttribute("data-meridiam-value","AM"),u.addEventListener("click",o),u.innerHTML="AM",u.classList.add("gamut__timePicker__meridiamSelector--meridiam"),l.appendChild(u);var c=newElem("div");c.setAttribute("data-meridiam-value","PM"),c.addEventListener("click",o),c.innerHTML="PM",c.classList.add("gamut__timePicker__meridiamSelector--meridiam"),l.appendChild(c),"AM"===P.meridiamValue?u.classList.toggle("gamut__timePicker__meridiamSelector--selected"):"PM"===P.meridiamValue&&c.classList.toggle("gamut__timePicker__meridiamSelector--selected"),M.appendChild(l);var s=newElem("div");s.classList.add("gamut__timePicker__clockWrapper");var d=newElem("div");d.classList.add("gamut__timePicker__clock");for(var m=90,p=0;p<60;p++){var v=newElem("div"),h=p*(Math.PI/30),g=100*(101+101*Math.cos(h))/202,f=100*(101+101*Math.sin(h))/202;p%5==0?v.classList.add("gamut__timePicker__clock--hrPointer"):v.classList.add("gamut__timePicker__clock--minPointer"),v.style.transform="rotate(".concat(m,"deg)"),v.style.left="".concat(g,"%"),v.style.top="".concat(f,"%"),d.appendChild(v),m+=6}s.appendChild(d);var _=newElem("div");_.classList.add("gamut__timePicker__labels");for(var b=3,k=0;k<12;k++){var y=newElem("span");y.innerHTML=b;var E=k*(Math.PI/6),x=100*(80+80*Math.cos(E))/160,w=100*(80+80*Math.sin(E))/160;y.classList.add("gamut__timePicker__labels--hourLabel"),y.style.left="".concat(x,"%"),y.style.top="".concat(w,"%"),_.appendChild(y),12<++b&&(b=1)}s.appendChild(_);var V=newElem("div");V.classList.add("gamut__timePicker__minHand"),V.style.transform="rotate(".concat(6*P.minuteValue,"deg)"),V.addEventListener("mousedown",i),V.setAttribute("ondragstart","event.preventDefault(); event.stopPropagation();"),V.setAttribute("data-clock-hand","minute"),s.appendChild(V);var L=newElem("div");L.classList.add("gamut__timePicker__hrHand"),L.style.transform="rotate(".concat(30*P.hourValue,"deg)"),L.addEventListener("mousedown",i),L.setAttribute("ondragstart","event.preventDefault(); event.stopPropagation();"),L.setAttribute("data-clock-hand","hour"),s.appendChild(L),M.appendChild(s);var C=newElem("div");C.classList.add("gamut__timePicker__time"),["hourInput","separator","minuteInput"].forEach(function(e){if("separator"===e){var t=newElem("span");t.classList.add("gamut__timePicker__time--separator"),t.innerHTML=":",C.appendChild(t)}else{var n=newElem("input");n.setAttribute("type","text"),"hourInput"===e?(n.setAttribute("data-time-param","hour"),n.value=r("hour")):"minuteInput"===e&&(n.setAttribute("data-time-param","minute"),n.value=r("minute")),n.addEventListener("change",function(e){var t=e.target,n=t.dataset.timeParam,a=t.value;if(null!=a&&"number"==typeof Number(a)){"hour"===n?(a<1&&(a=12),12<a&&(a=1)):"minute"===n&&(a<0&&(a=59),59<a&&(a=0)),P["".concat(n,"Value")]=Number(a);var i="hour"===n?30*a:6*a;document.querySelector('div[data-clock-hand="'.concat(n,'"]')).style.transform="rotate(".concat(i,"deg)"),a<10&&(a="0"+a),t.value=a}else(a=P["".concat(n,"Value")])<10&&(a="0"+a),t.value=a}),C.appendChild(n)}}),M.appendChild(C);var A=newElem("div");A.classList.add("gamut__timePicker__done");var S=document.createTextNode("DONE");A.appendChild(S),A.addEventListener("click",P.close),M.appendChild(A),P.input.parentNode.appendChild(M),window.addEventListener("click",P.close)},P.close=function(e){(P.isAppMaker?e.target!==P.input.parentElement:e.target!==P.input)&&(P.setValue(!0),P.input.parentNode.removeChild(M),window.removeEventListener("click",P.close),gamut.activeTimePicker=null)},P.preventClose=function(e){return e.stopPropagation(),!1},M.addEventListener("click",P.preventClose),P.isAppMaker&&P.input.parentElement.addEventListener("click",P.preventClose),P.focus=function(e){gamut.activeTimePicker&&gamut.activeTimePicker.close(e),P.isAppMaker&&(P.dateTime=r.value||new Date,P.dateTime.setHours(P.hourValue,P.minuteValue,0,0));var t=P.isAppMaker?e.target.parentElement.getBoundingClientRect():P.input.getBoundingClientRect();P.open(t.top,t.left,t.height,t.width),(gamut.activeTimePicker=P).input.blur()},P.isAppMaker?P.timeButton.addEventListener("click",P.focus):(P.input.addEventListener("focus",P.focus),P.input.blur()),P}console.error("%cGAMUT Time Picker Error: %cEither an input element or a Date Box Widget is required!","color:red","color:brown")};!function(){var e={init:function(e,t){if(this.observers={},this.activeTimeSetter=null,this.timeSetter=timeSetter,this.activeTimePicker=null,this.timePicker=timePicker,e&&e.appKey){this.formatTextBox=formatTextBox,this.formatSwitch=formatSwitch;var n=e.pages._values,a=e.popups._values,i=e.pageFragments._values,r=[].concat(_toConsumableArray(n),_toConsumableArray(a),_toConsumableArray(i)),o=[];r.forEach(function(e){var t=e.root.getElement();o=[].concat(_toConsumableArray(o),_toConsumableArray(t.querySelectorAll("span"))).filter(function(e){return-1<e.classList.toString().indexOf("gamutSwitch--")})}),o.forEach(function(e){e.classList.add("gamutSwitch")}),null!=t&&"object"===_typeof(t)&&void 0!==t.defaultSwitch&&null!==t.defaultSwitch&&formatSwitch(null,t.defaultSwitch,!0,r)}else console.warn('%cGAMUT Init Warning: %c"app" parameter is required for Google App Maker. Some features may not work!',"color: red","color:brown")}};window.gamut=e}();